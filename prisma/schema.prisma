// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["jsonProtocol"]
}

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

model Wallet {
  id          Int           @id @default(autoincrement())
  name        String
  description String?
  currency    Currency
  ownerId     String
  Transaction Transaction[]
}

model Transaction {
  id          Int       @id @default(autoincrement())
  amount      Float
  date        DateTime  @default(now())
  description String?
  walletId    Int
  wallet      Wallet    @relation(fields: [walletId], references: [id])
  categoryId  Int?
  category    Category? @relation(fields: [categoryId], references: [id])
  tagId       Int?
  tag         Tag?      @relation(fields: [tagId], references: [id])

  @@index([walletId], name: "walletId")
  @@index([categoryId], name: "categoryId")
  @@index([tagId], name: "tagId")
}

model Category {
  id          Int           @id @default(autoincrement())
  name        String
  description String?
  userId      String
  Transaction Transaction[]
}

model Tag {
  id          Int           @id @default(autoincrement())
  name        String
  userId      String
  Transaction Transaction[]
}

enum Currency {
  USD
  EUR
  GBP
  RUB
  UAH
  BYN
  KZT
  KGS
  UZS
  AZN
  GEL
  MDL
  TJS
  TMT
  TRY
  CNY
  JPY
  CHF
  PLN
  CZK
  SEK
  DKK
  NOK
  HUF
  BGN
  AUD
  CAD
  NZD
  ILS
  AED
  SAR
  KRW
  INR
  MXN
  BRL
  CLP
  COP
  ARS
  PEN
  VND
  MYR
  IDR
  THB
  PHP
  SGD
  HKD
  ZAR
  BDT
  PKR
  IQD
  QAR
  KWD
  OMR
  JOD
  BHD
  LBP
  EGP
  LKR
  NGN
  TZS
  DZD
  TND
  MAD
  XOF
  XAF
}
